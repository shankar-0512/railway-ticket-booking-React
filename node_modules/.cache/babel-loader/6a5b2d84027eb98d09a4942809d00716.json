{"ast":null,"code":"import _asyncToGenerator from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React JS\\\\space-ticket-booking-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useCallback}from\"react\";function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),responseJson=_useState6[0],setResponseJson=_useState6[1];function resetError(){setError(null);}function resetResponseJson(){setResponseJson(\"\");}var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestConfig,applyData){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(requestConfig.url,{method:requestConfig.method?requestConfig.method:\"GET\",headers:requestConfig.headers?requestConfig.headers:{},body:requestConfig.body?JSON.stringify(requestConfig.body):null});case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(requestConfig.errorMsg);case 8:_context.next=10;return response.json();case 10:data=_context.sent;setResponseJson(data);if(!(data.responseCode===1)){_context.next=14;break;}throw new Error(data.responseMessage);case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setError(_context.t0.message||requestConfig.errorMsg);case 19:setIsLoading(false);case 20:case\"end\":return _context.stop();}}},_callee,null,[[2,16]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}(),[]);return{isLoading:isLoading,error:error,response:responseJson,sendRequest:sendRequest,resetError:resetError,resetResponse:resetResponseJson};}export default useHttp;","map":{"version":3,"sources":["D:/React JS/space-ticket-booking-app/src/hooks/use-http.js"],"names":["useState","useCallback","useHttp","isLoading","setIsLoading","error","setError","responseJson","setResponseJson","resetError","resetResponseJson","sendRequest","requestConfig","applyData","fetch","url","method","headers","body","JSON","stringify","response","ok","Error","errorMsg","json","data","responseCode","responseMessage","message","resetResponse"],"mappings":"wXAAA,OAASA,QAAT,CAAmBC,WAAnB,KAAsC,OAAtC,CAEA,QAASC,CAAAA,OAAT,EAAmB,CACjB,cAAkCF,QAAQ,CAAC,KAAD,CAA1C,wCAAOG,SAAP,eAAkBC,YAAlB,eACA,eAA0BJ,QAAQ,CAAC,IAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eACA,eAAwCN,QAAQ,CAAC,EAAD,CAAhD,yCAAOO,YAAP,eAAqBC,eAArB,eAEA,QAASC,CAAAA,UAAT,EAAsB,CACpBH,QAAQ,CAAC,IAAD,CAAR,CACD,CACD,QAASI,CAAAA,iBAAT,EAA6B,CAC3BF,eAAe,CAAC,EAAD,CAAf,CACD,CAED,GAAMG,CAAAA,WAAW,CAAGV,WAAW,0FAAC,iBAAOW,aAAP,CAAsBC,SAAtB,oIAC9BT,YAAY,CAAC,IAAD,CAAZ,CACAE,QAAQ,CAAC,IAAD,CAAR,CAF8B,sCAILQ,CAAAA,KAAK,CAACF,aAAa,CAACG,GAAf,CAAoB,CAC9CC,MAAM,CAAEJ,aAAa,CAACI,MAAd,CAAuBJ,aAAa,CAACI,MAArC,CAA8C,KADR,CAE9CC,OAAO,CAAEL,aAAa,CAACK,OAAd,CAAwBL,aAAa,CAACK,OAAtC,CAAgD,EAFX,CAG9CC,IAAI,CAAEN,aAAa,CAACM,IAAd,CAAqBC,IAAI,CAACC,SAAL,CAAeR,aAAa,CAACM,IAA7B,CAArB,CAA0D,IAHlB,CAApB,CAJA,QAItBG,QAJsB,kBAUvBA,QAAQ,CAACC,EAVc,8BAWpB,IAAIC,CAAAA,KAAJ,CAAUX,aAAa,CAACY,QAAxB,CAXoB,+BAcTH,CAAAA,QAAQ,CAACI,IAAT,EAdS,SActBC,IAdsB,eAe5BlB,eAAe,CAACkB,IAAD,CAAf,CAf4B,KAiBxBA,IAAI,CAACC,YAAL,GAAsB,CAjBE,gCAkBpB,IAAIJ,CAAAA,KAAJ,CAAUG,IAAI,CAACE,eAAf,CAlBoB,0FAqB5BtB,QAAQ,CAAC,YAAIuB,OAAJ,EAAejB,aAAa,CAACY,QAA9B,CAAR,CArB4B,QAuB9BpB,YAAY,CAAC,KAAD,CAAZ,CAvB8B,qEAAD,mEAwB5B,EAxB4B,CAA/B,CA0BA,MAAO,CACLD,SAAS,CAAEA,SADN,CAELE,KAAK,CAAEA,KAFF,CAGLgB,QAAQ,CAAEd,YAHL,CAILI,WAAW,CAAEA,WAJR,CAKLF,UAAU,CAAEA,UALP,CAMLqB,aAAa,CAAEpB,iBANV,CAAP,CAQD,CACD,cAAeR,CAAAA,OAAf","sourcesContent":["import { useState, useCallback } from \"react\";\r\n\r\nfunction useHttp() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [responseJson, setResponseJson] = useState(\"\");\r\n\r\n  function resetError() {\r\n    setError(null);\r\n  }\r\n  function resetResponseJson() {\r\n    setResponseJson(\"\");\r\n  }\r\n\r\n  const sendRequest = useCallback(async (requestConfig, applyData) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(requestConfig.url, {\r\n        method: requestConfig.method ? requestConfig.method : \"GET\",\r\n        headers: requestConfig.headers ? requestConfig.headers : {},\r\n        body: requestConfig.body ? JSON.stringify(requestConfig.body) : null,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(requestConfig.errorMsg);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setResponseJson(data);\r\n\r\n      if (data.responseCode === 1) {\r\n        throw new Error(data.responseMessage);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message || requestConfig.errorMsg);\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  return {\r\n    isLoading: isLoading,\r\n    error: error,\r\n    response: responseJson,\r\n    sendRequest: sendRequest,\r\n    resetError: resetError,\r\n    resetResponse: resetResponseJson,\r\n  };\r\n}\r\nexport default useHttp;\r\n"]},"metadata":{},"sourceType":"module"}