{"ast":null,"code":"import _asyncToGenerator from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React JS\\\\space-ticket-booking-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import Layout from\"../layout/Layout\";import classes from\"./MyProfile.module.css\";import Button from\"../UI/Button/Button\";import{useEffect,useState,useRef}from\"react\";import moment from\"moment\";import styles from\"../CommonInput/Input.module.css\";import Card from\"../UI/Card/Card\";import useHttp from\"../../hooks/use-http\";import Input from\"../CommonInput/Input\";import loginStyles from\"../Authentication/Login.module.css\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import Modal from\"../UI/Modal\";import LoadingSpinner from\"../UI/LoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var pswCode=null;var pswMessage=null;function MyProfile(){//************DECLARATIONS************//\nvar navigate=useNavigate();var _useHttp=useHttp(),fetchIsLoading=_useHttp.isLoading,fetchError=_useHttp.error,sendFetchRequest=_useHttp.sendRequest,fetchResponse=_useHttp.response,fetchResetError=_useHttp.resetError,fetchResetResponse=_useHttp.resetResponse;var _useHttp2=useHttp(),saveIsLoading=_useHttp2.isLoading,saveError=_useHttp2.error,sendSaveRequest=_useHttp2.sendRequest,saveResponse=_useHttp2.response,saveResetError=_useHttp2.resetError,saveResetResponse=_useHttp2.resetResponse;var _useHttp3=useHttp(),pswIsLoading=_useHttp3.isLoading,pswError=_useHttp3.error,sendPasswordRequest=_useHttp3.sendRequest,pswResponse=_useHttp3.response,resetPswError=_useHttp3.resetError,resetPswResponse=_useHttp3.resetResponse;//STATES\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),enableForm=_useState2[0],setEnableForm=_useState2[1];var _useState3=useState(fetchResponse.userName),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(fetchResponse.basePlanet),_useState6=_slicedToArray(_useState5,2),basePlanet=_useState6[0],setBasePlanet=_useState6[1];var _useState7=useState(fetchResponse.dob),_useState8=_slicedToArray(_useState7,2),dob=_useState8[0],setDob=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),oldPsw=_useState10[0],setOldPsw=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),newPsw=_useState12[0],setNewPsw=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),confirmNewPsw=_useState14[0],setConfirmNewPsw=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),changePassword=_useState16[0],setChangePassword=_useState16[1];var userEmail=useSelector(function(state){return state.login.userId;});//REFS\nvar nameInputRef=useRef();var planetInputRef=useRef();var dateInputRef=useRef();var oldPswInputRef=useRef();var newPswInputRef=useRef();var confirmNewPswInputRef=useRef();//************API CALLS************//\n//Request to backend for profile data\nvar FetchProfileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestJson){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sendFetchRequest({url:\"http://localhost:8080/api/protected/fetchProfileDetails\",method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:{email:requestJson.userEmail},errorMsg:\"Request failed!\"});case 1:case\"end\":return _context.stop();}}},_callee);}));return function FetchProfileHandler(_x){return _ref.apply(this,arguments);};}();//Request to backend for profile data\nvar saveEditMode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(requestJson){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:sendSaveRequest({url:\"http://localhost:8080/api/protected/saveUserDetails\",method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:{email:requestJson.userEmail,name:requestJson.userName,basePlanet:requestJson.basePlanet,dob:requestJson.dob},errorMsg:\"Request failed!\"});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function saveEditMode(_x2){return _ref2.apply(this,arguments);};}();//Request to backend for changing password\nvar ChangePasswordHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(requestJson){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sendPasswordRequest({url:\"http://localhost:8080/api/protected/changePassword\",method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:{userEmail:requestJson.userEmail,oldPassword:requestJson.oldPsw,newPassword:requestJson.newPsw,confirmNewPassword:requestJson.confirmNewPsw},errorMsg:\"Request failed!\"});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function ChangePasswordHandler(_x3){return _ref3.apply(this,arguments);};}();//************STATE HANDLERS************//\nfunction onEditHandler(){setEnableForm(true);}function disableFormHandler(){setEnableForm(false);}function nameChangeHandler(event){setUserName(event.target.value);}function planetChangeHandler(event){setBasePlanet(event.target.value);}function dateChangeHandler(event){setDob(event.target.value);}function oldPswChangeHandler(event){setOldPsw(event.target.value);}function newPswChangeHandler(event){setNewPsw(event.target.value);}function confirmNewPswChangeHandler(event){setConfirmNewPsw(event.target.value);}//************ACTION HANDLERS************//\nuseEffect(function(){setUserName(fetchResponse.userName);setBasePlanet(fetchResponse.basePlanet);setDob(fetchResponse.dob);},[fetchResponse.userName,fetchResponse.basePlanet,fetchResponse.dob]);useEffect(function(){var requestJson={userEmail:userEmail};FetchProfileHandler(requestJson);},[]);function EditModeSubmitHandler(event){event.preventDefault();var requestJson={userEmail:userEmail,userName:userName,basePlanet:basePlanet,dob:dob};saveEditMode(requestJson);}function navigateBack(){disableFormHandler();navigate(\"/home\");}useEffect(function(){if(saveResponse.responseCode===0){disableFormHandler();navigate(\"/home/myProfile\");}},[saveResponse.responseMessage,navigate]);useEffect(function(){if(saveResponse.responseCode===0){var fetchRequest={userEmail:userEmail};FetchProfileHandler(fetchRequest);}},[saveResponse.responseMessage]);function closeErrorModal(){saveResetError();saveResetResponse();console.log(saveResponse.responseMessage);if(saveResponse.responseMessage===undefined){navigate(\"/home\");}}function resetPasswordResponses(){resetPswError();resetPswResponse();}function closePswMsgModal(){if(pswCode===1){setChangePassword(true);}else if(pswCode===0){pswCode=null;pswMessage=null;navigate(\"/home\");}}function changePasswordSubmitHandler(){setChangePassword(true);}function closeChangePswModal(){setChangePassword(false);resetPasswordResponses();}function onChangePassword(event){event.preventDefault();var requestJson={userEmail:userEmail,oldPsw:oldPsw,newPsw:newPsw,confirmNewPsw:confirmNewPsw};ChangePasswordHandler(requestJson);}if(pswResponse.responseCode!==undefined){pswCode=pswResponse.responseCode;pswMessage=pswResponse.responseMessage;setChangePassword(false);resetPasswordResponses();}//************MODALS************//\nvar modalActions=/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(Button,{className:classes.btn,onClick:closeErrorModal,children:\"Close\"})});var saveModalContent=/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.total,children:/*#__PURE__*/_jsx(\"span\",{children:saveResponse.responseMessage})})});var passwordModalActions=/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(Button,{className:classes.btn,onClick:closePswMsgModal,children:\"Okay\"})});var passwordModalContent=/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.total,children:/*#__PURE__*/_jsxs(\"span\",{children:[pswResponse.responseMessage,pswMessage]})})});var ChangePasswordModalContent=/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.total,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onChangePassword,children:[/*#__PURE__*/_jsx(Input,{ref:oldPswInputRef,id:\"oldPsw\",label:\"Old Password :\",type:\"password\",value:oldPsw,onChange:oldPswChangeHandler}),/*#__PURE__*/_jsx(Input,{ref:newPswInputRef,id:\"newPsw\",label:\"New Password :\",type:\"password\",value:newPsw,onChange:newPswChangeHandler}),/*#__PURE__*/_jsx(Input,{ref:confirmNewPswInputRef,id:\"conNewPsw\",label:\"Confirm New Password :\",type:\"password\",value:confirmNewPsw,onChange:confirmNewPswChangeHandler}),/*#__PURE__*/_jsx(Button,{className:classes.button,type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{className:classes.button,type:\"button\",onClick:closeChangePswModal,children:\"Cancel\"})]})})});//************LOADING SPINNERS************//\nif(fetchIsLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(saveIsLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(pswIsLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Layout,{children:[changePassword&&/*#__PURE__*/_jsx(Modal,{children:ChangePasswordModalContent}),(pswError||pswResponse.responseCode!==undefined||pswCode===0)&&/*#__PURE__*/_jsxs(Modal,{children:[passwordModalContent,passwordModalActions]}),(saveError||saveResponse.responseCode!==undefined)&&/*#__PURE__*/_jsxs(Modal,{children:[saveModalContent,modalActions]}),!enableForm&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:classes.h2Profile,children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name : \"}),/*#__PURE__*/_jsx(\"label\",{children:fetchResponse.userName})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-Mail : \"}),/*#__PURE__*/_jsx(\"label\",{children:fetchResponse.userEmail})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password : \"}),/*#__PURE__*/_jsx(\"label\",{children:fetchResponse.userPassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Base Planet : \"}),/*#__PURE__*/_jsx(\"label\",{children:fetchResponse.basePlanet})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Birth : \"}),/*#__PURE__*/_jsx(\"label\",{children:fetchResponse.dob})]}),/*#__PURE__*/_jsxs(\"div\",{className:loginStyles.action,children:[/*#__PURE__*/_jsx(Button,{type:\"button\",className:classes.button,onClick:onEditHandler,children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:classes.button,onClick:changePasswordSubmitHandler,children:\"Change Password\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:classes.button,onClick:navigateBack,children:\"Back\"})]})]}),enableForm&&/*#__PURE__*/_jsx(Card,{className:loginStyles.login,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:EditModeSubmitHandler,children:[/*#__PURE__*/_jsx(Input,{ref:nameInputRef,id:\"name\",label:\"Name\",type:\"text\",value:userName,onChange:nameChangeHandler}),/*#__PURE__*/_jsxs(\"div\",{className:styles.control,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Base Planet\"}),/*#__PURE__*/_jsxs(\"select\",{ref:planetInputRef,className:loginStyles.select,name:\"planetList\",id:\"planets\",value:basePlanet,onChange:planetChangeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:\"grey\"},children:\"Select an Option\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Earth\",style:{color:\"black\"},children:\"Earth\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mars\",style:{color:\"black\"},children:\"Mars\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Moon\",style:{color:\"black\"},children:\"Moon\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ceres\",style:{color:\"black\"},children:\"Ceres\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Europa\",style:{color:\"black\"},children:\"Europa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Titan\",style:{color:\"black\"},children:\"Titan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EB-15\",style:{color:\"black\"},children:\"EB-15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ISS\",style:{color:\"black\"},children:\"ISS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kepler-186F\",style:{color:\"black\"},children:\"Kepler-186F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"input\",{ref:dateInputRef,id:\"date\",label:\"Date of Birth\",type:\"date\",value:dob,onChange:dateChangeHandler,max:moment().format(\"YYYY-MM-DD\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:loginStyles.action,children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",className:classes.button,children:\"Save\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:classes.button,onClick:disableFormHandler,children:\"Cancel\"})]})]})})]})});}export default MyProfile;","map":{"version":3,"sources":["D:/React JS/space-ticket-booking-app/src/components/Profile/MyProfile.js"],"names":["React","Layout","classes","Button","useEffect","useState","useRef","moment","styles","Card","useHttp","Input","loginStyles","useSelector","useNavigate","Modal","LoadingSpinner","pswCode","pswMessage","MyProfile","navigate","fetchIsLoading","isLoading","fetchError","error","sendFetchRequest","sendRequest","fetchResponse","response","fetchResetError","resetError","fetchResetResponse","resetResponse","saveIsLoading","saveError","sendSaveRequest","saveResponse","saveResetError","saveResetResponse","pswIsLoading","pswError","sendPasswordRequest","pswResponse","resetPswError","resetPswResponse","enableForm","setEnableForm","userName","setUserName","basePlanet","setBasePlanet","dob","setDob","oldPsw","setOldPsw","newPsw","setNewPsw","confirmNewPsw","setConfirmNewPsw","changePassword","setChangePassword","userEmail","state","login","userId","nameInputRef","planetInputRef","dateInputRef","oldPswInputRef","newPswInputRef","confirmNewPswInputRef","FetchProfileHandler","requestJson","url","method","headers","body","email","errorMsg","saveEditMode","name","ChangePasswordHandler","oldPassword","newPassword","confirmNewPassword","onEditHandler","disableFormHandler","nameChangeHandler","event","target","value","planetChangeHandler","dateChangeHandler","oldPswChangeHandler","newPswChangeHandler","confirmNewPswChangeHandler","EditModeSubmitHandler","preventDefault","navigateBack","responseCode","responseMessage","fetchRequest","closeErrorModal","console","log","undefined","resetPasswordResponses","closePswMsgModal","changePasswordSubmitHandler","closeChangePswModal","onChangePassword","modalActions","actions","btn","saveModalContent","total","passwordModalActions","passwordModalContent","ChangePasswordModalContent","button","h2Profile","control","userPassword","action","select","color","format"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Layout from \"../layout/Layout\";\r\nimport classes from \"./MyProfile.module.css\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport moment from \"moment\";\r\nimport styles from \"../CommonInput/Input.module.css\";\r\nimport Card from \"../UI/Card/Card\";\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport Input from \"../CommonInput/Input\";\r\nimport loginStyles from \"../Authentication/Login.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Modal from \"../UI/Modal\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\n\r\nvar pswCode = null;\r\nvar pswMessage = null;\r\nfunction MyProfile() {\r\n  //************DECLARATIONS************//\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    isLoading: fetchIsLoading,\r\n    error: fetchError,\r\n    sendRequest: sendFetchRequest,\r\n    response: fetchResponse,\r\n    resetError: fetchResetError,\r\n    resetResponse: fetchResetResponse,\r\n  } = useHttp();\r\n\r\n  const {\r\n    isLoading: saveIsLoading,\r\n    error: saveError,\r\n    sendRequest: sendSaveRequest,\r\n    response: saveResponse,\r\n    resetError: saveResetError,\r\n    resetResponse: saveResetResponse,\r\n  } = useHttp();\r\n\r\n  const {\r\n    isLoading: pswIsLoading,\r\n    error: pswError,\r\n    sendRequest: sendPasswordRequest,\r\n    response: pswResponse,\r\n    resetError: resetPswError,\r\n    resetResponse: resetPswResponse,\r\n  } = useHttp();\r\n\r\n  //STATES\r\n  const [enableForm, setEnableForm] = useState(false);\r\n  const [userName, setUserName] = useState(fetchResponse.userName);\r\n  const [basePlanet, setBasePlanet] = useState(fetchResponse.basePlanet);\r\n  const [dob, setDob] = useState(fetchResponse.dob);\r\n  const [oldPsw, setOldPsw] = useState(\"\");\r\n  const [newPsw, setNewPsw] = useState(\"\");\r\n  const [confirmNewPsw, setConfirmNewPsw] = useState(\"\");\r\n  const [changePassword, setChangePassword] = useState(false);\r\n  const userEmail = useSelector((state) => state.login.userId);\r\n\r\n  //REFS\r\n  const nameInputRef = useRef();\r\n  const planetInputRef = useRef();\r\n  const dateInputRef = useRef();\r\n  const oldPswInputRef = useRef();\r\n  const newPswInputRef = useRef();\r\n  const confirmNewPswInputRef = useRef();\r\n\r\n  //************API CALLS************//\r\n\r\n  //Request to backend for profile data\r\n  const FetchProfileHandler = async (requestJson) => {\r\n    sendFetchRequest({\r\n      url: \"http://localhost:8080/api/protected/fetchProfileDetails\",\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: {\r\n        email: requestJson.userEmail,\r\n      },\r\n      errorMsg: \"Request failed!\",\r\n    });\r\n  };\r\n\r\n  //Request to backend for profile data\r\n  const saveEditMode = async (requestJson) => {\r\n    sendSaveRequest({\r\n      url: \"http://localhost:8080/api/protected/saveUserDetails\",\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: {\r\n        email: requestJson.userEmail,\r\n        name: requestJson.userName,\r\n        basePlanet: requestJson.basePlanet,\r\n        dob: requestJson.dob,\r\n      },\r\n      errorMsg: \"Request failed!\",\r\n    });\r\n  };\r\n\r\n  //Request to backend for changing password\r\n  const ChangePasswordHandler = async (requestJson) => {\r\n    sendPasswordRequest({\r\n      url: \"http://localhost:8080/api/protected/changePassword\",\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: {\r\n        userEmail: requestJson.userEmail,\r\n        oldPassword: requestJson.oldPsw,\r\n        newPassword: requestJson.newPsw,\r\n        confirmNewPassword: requestJson.confirmNewPsw,\r\n      },\r\n      errorMsg: \"Request failed!\",\r\n    });\r\n  };\r\n\r\n  //************STATE HANDLERS************//\r\n\r\n  function onEditHandler() {\r\n    setEnableForm(true);\r\n  }\r\n\r\n  function disableFormHandler() {\r\n    setEnableForm(false);\r\n  }\r\n\r\n  function nameChangeHandler(event) {\r\n    setUserName(event.target.value);\r\n  }\r\n\r\n  function planetChangeHandler(event) {\r\n    setBasePlanet(event.target.value);\r\n  }\r\n\r\n  function dateChangeHandler(event) {\r\n    setDob(event.target.value);\r\n  }\r\n\r\n  function oldPswChangeHandler(event) {\r\n    setOldPsw(event.target.value);\r\n  }\r\n\r\n  function newPswChangeHandler(event) {\r\n    setNewPsw(event.target.value);\r\n  }\r\n\r\n  function confirmNewPswChangeHandler(event) {\r\n    setConfirmNewPsw(event.target.value);\r\n  }\r\n\r\n  //************ACTION HANDLERS************//\r\n\r\n  useEffect(() => {\r\n    setUserName(fetchResponse.userName);\r\n    setBasePlanet(fetchResponse.basePlanet);\r\n    setDob(fetchResponse.dob);\r\n  }, [fetchResponse.userName, fetchResponse.basePlanet, fetchResponse.dob]);\r\n\r\n  useEffect(() => {\r\n    const requestJson = { userEmail };\r\n    FetchProfileHandler(requestJson);\r\n  }, []);\r\n\r\n  function EditModeSubmitHandler(event) {\r\n    event.preventDefault();\r\n    const requestJson = {\r\n      userEmail,\r\n      userName,\r\n      basePlanet,\r\n      dob,\r\n    };\r\n\r\n    saveEditMode(requestJson);\r\n  }\r\n\r\n  function navigateBack() {\r\n    disableFormHandler();\r\n    navigate(\"/home\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (saveResponse.responseCode === 0) {\r\n      disableFormHandler();\r\n      navigate(\"/home/myProfile\");\r\n    }\r\n  }, [saveResponse.responseMessage, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (saveResponse.responseCode === 0) {\r\n      const fetchRequest = { userEmail };\r\n      FetchProfileHandler(fetchRequest);\r\n    }\r\n  }, [saveResponse.responseMessage]);\r\n\r\n  function closeErrorModal() {\r\n    saveResetError();\r\n    saveResetResponse();\r\n    console.log(saveResponse.responseMessage);\r\n    if (saveResponse.responseMessage === undefined) {\r\n      navigate(\"/home\");\r\n    }\r\n  }\r\n\r\n  function resetPasswordResponses() {\r\n    resetPswError();\r\n    resetPswResponse();\r\n  }\r\n\r\n  function closePswMsgModal() {\r\n    if (pswCode === 1) {\r\n      setChangePassword(true);\r\n    } else if (pswCode === 0) {\r\n      pswCode = null;\r\n      pswMessage = null;\r\n      navigate(\"/home\");\r\n    }\r\n  }\r\n\r\n  function changePasswordSubmitHandler() {\r\n    setChangePassword(true);\r\n  }\r\n\r\n  function closeChangePswModal() {\r\n    setChangePassword(false);\r\n    resetPasswordResponses();\r\n  }\r\n\r\n  function onChangePassword(event) {\r\n    event.preventDefault();\r\n\r\n    const requestJson = {\r\n      userEmail,\r\n      oldPsw,\r\n      newPsw,\r\n      confirmNewPsw,\r\n    };\r\n    ChangePasswordHandler(requestJson);\r\n  }\r\n\r\n  if (pswResponse.responseCode !== undefined) {\r\n    pswCode = pswResponse.responseCode;\r\n    pswMessage = pswResponse.responseMessage;\r\n    setChangePassword(false);\r\n    resetPasswordResponses();\r\n  }\r\n\r\n  //************MODALS************//\r\n\r\n  const modalActions = (\r\n    <div className={classes.actions}>\r\n      <Button className={classes.btn} onClick={closeErrorModal}>\r\n        Close\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  const saveModalContent = (\r\n    <React.Fragment>\r\n      <div className={classes.total}>\r\n        <span>{saveResponse.responseMessage}</span>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n\r\n  const passwordModalActions = (\r\n    <div className={classes.actions}>\r\n      <Button className={classes.btn} onClick={closePswMsgModal}>\r\n        Okay\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  const passwordModalContent = (\r\n    <React.Fragment>\r\n      <div className={classes.total}>\r\n        <span>\r\n          {pswResponse.responseMessage}\r\n          {pswMessage}\r\n        </span>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n\r\n  const ChangePasswordModalContent = (\r\n    <React.Fragment>\r\n      <div className={classes.total}>\r\n        <form onSubmit={onChangePassword}>\r\n          <Input\r\n            ref={oldPswInputRef}\r\n            id=\"oldPsw\"\r\n            label=\"Old Password :\"\r\n            type=\"password\"\r\n            value={oldPsw}\r\n            onChange={oldPswChangeHandler}\r\n          />\r\n          <Input\r\n            ref={newPswInputRef}\r\n            id=\"newPsw\"\r\n            label=\"New Password :\"\r\n            type=\"password\"\r\n            value={newPsw}\r\n            onChange={newPswChangeHandler}\r\n          />\r\n          <Input\r\n            ref={confirmNewPswInputRef}\r\n            id=\"conNewPsw\"\r\n            label=\"Confirm New Password :\"\r\n            type=\"password\"\r\n            value={confirmNewPsw}\r\n            onChange={confirmNewPswChangeHandler}\r\n          />\r\n          <Button className={classes.button} type=\"submit\">\r\n            Submit\r\n          </Button>\r\n          <Button\r\n            className={classes.button}\r\n            type=\"button\"\r\n            onClick={closeChangePswModal}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n\r\n  //************LOADING SPINNERS************//\r\n\r\n  if (fetchIsLoading) {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (saveIsLoading) {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (pswIsLoading) {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        {changePassword && <Modal>{ChangePasswordModalContent}</Modal>}\r\n        {(pswError ||\r\n          pswResponse.responseCode !== undefined ||\r\n          pswCode === 0) && (\r\n          <Modal>\r\n            {passwordModalContent}\r\n            {passwordModalActions}\r\n          </Modal>\r\n        )}\r\n        {(saveError || saveResponse.responseCode !== undefined) && (\r\n          <Modal>\r\n            {saveModalContent}\r\n            {modalActions}\r\n          </Modal>\r\n        )}\r\n        {!enableForm && (\r\n          <div>\r\n            <h2 className={classes.h2Profile}>My Profile</h2>\r\n            <div className={classes.control}>\r\n              <label>Name : </label>\r\n              <label>{fetchResponse.userName}</label>\r\n            </div>\r\n            <div className={classes.control}>\r\n              <label>E-Mail : </label>\r\n              <label>{fetchResponse.userEmail}</label>\r\n            </div>\r\n            <div className={classes.control}>\r\n              <label>Password : </label>\r\n              <label>{fetchResponse.userPassword}</label>\r\n            </div>\r\n            <div className={classes.control}>\r\n              <label>Base Planet : </label>\r\n              <label>{fetchResponse.basePlanet}</label>\r\n            </div>\r\n            <div className={classes.control}>\r\n              <label>Date of Birth : </label>\r\n              <label>{fetchResponse.dob}</label>\r\n            </div>\r\n            <div className={loginStyles.action}>\r\n              <Button\r\n                type=\"button\"\r\n                className={classes.button}\r\n                onClick={onEditHandler}\r\n              >\r\n                Edit\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                className={classes.button}\r\n                onClick={changePasswordSubmitHandler}\r\n              >\r\n                Change Password\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                className={classes.button}\r\n                onClick={navigateBack}\r\n              >\r\n                Back\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {enableForm && (\r\n          <Card className={loginStyles.login}>\r\n            <form onSubmit={EditModeSubmitHandler}>\r\n              <Input\r\n                ref={nameInputRef}\r\n                id=\"name\"\r\n                label=\"Name\"\r\n                type=\"text\"\r\n                value={userName}\r\n                onChange={nameChangeHandler}\r\n              />\r\n              <div className={styles.control}>\r\n                <label>Base Planet</label>\r\n                <select\r\n                  ref={planetInputRef}\r\n                  className={loginStyles.select}\r\n                  name=\"planetList\"\r\n                  id=\"planets\"\r\n                  value={basePlanet}\r\n                  onChange={planetChangeHandler}\r\n                >\r\n                  <option value=\"\" style={{ color: \"grey\" }}>\r\n                    Select an Option\r\n                  </option>\r\n                  <option value=\"Earth\" style={{ color: \"black\" }}>\r\n                    Earth\r\n                  </option>\r\n                  <option value=\"Mars\" style={{ color: \"black\" }}>\r\n                    Mars\r\n                  </option>\r\n                  <option value=\"Moon\" style={{ color: \"black\" }}>\r\n                    Moon\r\n                  </option>\r\n                  <option value=\"Ceres\" style={{ color: \"black\" }}>\r\n                    Ceres\r\n                  </option>\r\n                  <option value=\"Europa\" style={{ color: \"black\" }}>\r\n                    Europa\r\n                  </option>\r\n                  <option value=\"Titan\" style={{ color: \"black\" }}>\r\n                    Titan\r\n                  </option>\r\n                  <option value=\"EB-15\" style={{ color: \"black\" }}>\r\n                    EB-15\r\n                  </option>\r\n                  <option value=\"ISS\" style={{ color: \"black\" }}>\r\n                    ISS\r\n                  </option>\r\n                  <option value=\"Kepler-186F\" style={{ color: \"black\" }}>\r\n                    Kepler-186F\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div className={styles.control}>\r\n                <label htmlFor=\"date\">Date of Birth</label>\r\n                <input\r\n                  ref={dateInputRef}\r\n                  id=\"date\"\r\n                  label=\"Date of Birth\"\r\n                  type=\"date\"\r\n                  value={dob}\r\n                  onChange={dateChangeHandler}\r\n                  max={moment().format(\"YYYY-MM-DD\")}\r\n                ></input>\r\n              </div>\r\n              <div className={loginStyles.action}>\r\n                <Button type=\"submit\" className={classes.button}>\r\n                  Save\r\n                </Button>\r\n                <Button\r\n                  type=\"button\"\r\n                  className={classes.button}\r\n                  onClick={disableFormHandler}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </Card>\r\n        )}\r\n      </Layout>\r\n    </div>\r\n  );\r\n}\r\nexport default MyProfile;\r\n"]},"metadata":{},"sourceType":"module"}