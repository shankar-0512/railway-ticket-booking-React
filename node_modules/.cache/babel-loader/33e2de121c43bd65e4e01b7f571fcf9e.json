{"ast":null,"code":"import _asyncToGenerator from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React JS/space-ticket-booking-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React JS\\\\space-ticket-booking-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import Layout from\"../layout/Layout\";import{useRef,useState}from\"react\";import classes from\"../Home/Home.module.css\";import styles from\"../CommonInput/Input.module.css\";import Button from\"../UI/Button/Button\";import useHttp from\"../../hooks/use-http\";import ShipList from\"./ShipList\";import LoadingSpinner from\"../UI/LoadingSpinner\";import moment from\"moment\";import{useDispatch}from\"react-redux\";import{userInputActions}from\"../../store/userInputsSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){//************DECLARATIONS************//\nvar dispatch=useDispatch();//STATES\nvar _useState=useState({from:true,to:true,toNotMatching:true,class:true,date:true}),_useState2=_slicedToArray(_useState,2),formInputsValidity=_useState2[0],setFormInputsValidity=_useState2[1];//REFS\nvar fromInputRef=useRef();var toInputRef=useRef();var classInputRef=useRef();var dateInputRef=useRef();var _useHttp=useHttp(),isLoading=_useHttp.isLoading,error=_useHttp.error,sendTaskRequest=_useHttp.sendRequest,response=_useHttp.response,resetError=_useHttp.resetError,resetResponse=_useHttp.resetResponse;//************API CALLS************//\n//Request to backend for login and sign-up\nvar SearchShipsHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestJson){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sendTaskRequest({url:\"http://localhost:8080/api/protected/searchShips\",method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:{from:requestJson.enteredFrom,to:requestJson.enteredTo,shipClass:requestJson.enteredClass,journeyDate:requestJson.enteredDate},errorMsg:\"Request failed!\"});case 1:case\"end\":return _context.stop();}}},_callee);}));return function SearchShipsHandler(_x){return _ref.apply(this,arguments);};}();//************ACTION HANDLERS************//\nfunction submitHandler(event){event.preventDefault();var enteredFrom=fromInputRef.current.value;var enteredTo=toInputRef.current.value;var enteredClass=classInputRef.current.value;var enteredDate=dateInputRef.current.value;var enteredFromIsValid=enteredFrom.trim()!==\"none\";var enteredToIsValid=enteredTo.trim()!==\"\";var enteredToIsNotMatching=enteredTo.trim()!==enteredFrom.trim();var enteredClassIsValid=enteredClass.trim()!==\"\";var enteredDateIsValid=enteredDate.trim()!==\"\";setFormInputsValidity({from:enteredFromIsValid,to:enteredToIsValid,toNotMatching:enteredToIsNotMatching,class:enteredClassIsValid,date:enteredDateIsValid});var formIsValid=enteredFromIsValid&&enteredToIsValid&&enteredClassIsValid&&enteredToIsNotMatching&&enteredDateIsValid;if(formIsValid){var requestJson={enteredFrom:enteredFrom,enteredTo:enteredTo,enteredClass:enteredClass,enteredDate:enteredDate};dispatch(userInputActions.UpdateUserInputs({from:enteredFrom,to:enteredTo,class:enteredClass,journeyDate:enteredDate}));setFormInputsValidity({from:true,to:true,toNotMatching:true,class:true,date:true});SearchShipsHandler(requestJson);fromInputRef.current.value=\"none\";toInputRef.current.value=\"\";classInputRef.current.value=\"\";dateInputRef.current.value=\"\";}}var fromControlClasses=\"\".concat(styles.control,\" \").concat(formInputsValidity.from===true?\"\":styles.invalid);var toControlClasses=\"\".concat(styles.control,\" \").concat(formInputsValidity.to===true?\"\":styles.invalid);var classControlClasses=\"\".concat(styles.control,\" \").concat(formInputsValidity.class===true?\"\":styles.invalid);var dateControlClasses=\"\".concat(styles.control,\" \").concat(formInputsValidity.date===true?\"\":styles.invalid);//************LOADING SPINNERS************//\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"section\",{className:classes.summary,children:[/*#__PURE__*/_jsx(\"h3\",{className:classes.heading,children:\"Book a Ship\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[!formInputsValidity.from&&/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"Please select an Origin!\"}),/*#__PURE__*/_jsxs(\"div\",{className:fromControlClasses,children:[/*#__PURE__*/_jsx(\"label\",{children:\"From\"}),/*#__PURE__*/_jsxs(\"select\",{ref:fromInputRef,className:classes.select,name:\"fromList\",id:\"from\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",style:{color:\"grey\"},children:\"Select an Option\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Earth\",style:{color:\"black\"},children:\"Earth\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mars\",style:{color:\"black\"},children:\"Mars\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Moon\",style:{color:\"black\"},children:\"Moon\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ceres\",style:{color:\"black\"},children:\"Ceres\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Europa\",style:{color:\"black\"},children:\"Europa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Titan\",style:{color:\"black\"},children:\"Titan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EB-15\",style:{color:\"black\"},children:\"EB-15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ISS\",style:{color:\"black\"},children:\"ISS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kepler-186F\",style:{color:\"black\"},children:\"Kepler-186F\"})]})]}),!formInputsValidity.to&&/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"Please select a Destination!\"}),!formInputsValidity.toNotMatching&&/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"Destination cannot be the same as From!\"}),/*#__PURE__*/_jsxs(\"div\",{className:toControlClasses,children:[/*#__PURE__*/_jsx(\"label\",{children:\"To\"}),/*#__PURE__*/_jsxs(\"select\",{ref:toInputRef,className:classes.select,name:\"toList\",id:\"to\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:\"grey\"},children:\"Select an Option\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Earth\",style:{color:\"black\"},children:\"Earth\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mars\",style:{color:\"black\"},children:\"Mars\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Moon\",style:{color:\"black\"},children:\"Moon\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ceres\",style:{color:\"black\"},children:\"Ceres\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Europa\",style:{color:\"black\"},children:\"Europa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Titan\",style:{color:\"black\"},children:\"Titan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EB-15\",style:{color:\"black\"},children:\"EB-15\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ISS\",style:{color:\"black\"},children:\"ISS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Kepler-186F\",style:{color:\"black\"},children:\"Kepler-186F\"})]})]}),!formInputsValidity.class&&/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"Please select a Class!\"}),/*#__PURE__*/_jsxs(\"div\",{className:classControlClasses,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Class\"}),/*#__PURE__*/_jsxs(\"select\",{ref:classInputRef,className:classes.select,name:\"classList\",id:\"class\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:\"grey\"},children:\"Select an Option\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Economy\",style:{color:\"black\"},children:\"Economy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Premium\",style:{color:\"black\"},children:\"Premium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Executive\",style:{color:\"black\"},children:\"Executive\"})]})]}),!formInputsValidity.date&&/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"Please select the Journey Date!\"}),/*#__PURE__*/_jsxs(\"div\",{className:dateControlClasses,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Journey Date\"}),/*#__PURE__*/_jsx(\"input\",{ref:dateInputRef,id:\"date\",label:\"Journey Date\",type:\"date\",min:moment().format(\"YYYY-MM-DD\")})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.action,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:classes.actions,children:\"Search Ships\"})})]})]})}),/*#__PURE__*/_jsx(\"section\",{className:classes.ships,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ShipList,{ships:response})})})]});}export default Home;","map":{"version":3,"sources":["D:/React JS/space-ticket-booking-app/src/components/Home/Home.js"],"names":["Layout","useRef","useState","classes","styles","Button","useHttp","ShipList","LoadingSpinner","moment","useDispatch","userInputActions","Home","dispatch","from","to","toNotMatching","class","date","formInputsValidity","setFormInputsValidity","fromInputRef","toInputRef","classInputRef","dateInputRef","isLoading","error","sendTaskRequest","sendRequest","response","resetError","resetResponse","SearchShipsHandler","requestJson","url","method","headers","body","enteredFrom","enteredTo","shipClass","enteredClass","journeyDate","enteredDate","errorMsg","submitHandler","event","preventDefault","current","value","enteredFromIsValid","trim","enteredToIsValid","enteredToIsNotMatching","enteredClassIsValid","enteredDateIsValid","formIsValid","UpdateUserInputs","fromControlClasses","control","invalid","toControlClasses","classControlClasses","dateControlClasses","summary","heading","select","color","format","action","actions","ships"],"mappings":"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","sourcesContent":["import Layout from \"../layout/Layout\";\r\nimport { useRef, useState } from \"react\";\r\nimport classes from \"../Home/Home.module.css\";\r\nimport styles from \"../CommonInput/Input.module.css\";\r\nimport Button from \"../UI/Button/Button\";\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport ShipList from \"./ShipList\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\nimport moment from \"moment\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { userInputActions } from \"../../store/userInputsSlice\"\r\n\r\nfunction Home() {\r\n\r\n  //************DECLARATIONS************//\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  //STATES\r\n  const [formInputsValidity, setFormInputsValidity] = useState({\r\n    from: true,\r\n    to: true,\r\n    toNotMatching: true,\r\n    class: true,\r\n    date: true,\r\n  });\r\n\r\n  //REFS\r\n  const fromInputRef = useRef();\r\n  const toInputRef = useRef();\r\n  const classInputRef = useRef();\r\n  const dateInputRef = useRef();\r\n\r\n  const {\r\n    isLoading,\r\n    error,\r\n    sendRequest: sendTaskRequest,\r\n    response,\r\n    resetError,\r\n    resetResponse,\r\n  } = useHttp();\r\n\r\n  //************API CALLS************//\r\n\r\n  //Request to backend for login and sign-up\r\n  const SearchShipsHandler = async (requestJson) => {\r\n    sendTaskRequest({\r\n      url: \"http://localhost:8080/api/protected/searchShips\",\r\n      method: \"post\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: {\r\n        from: requestJson.enteredFrom,\r\n        to: requestJson.enteredTo,\r\n        shipClass: requestJson.enteredClass,\r\n        journeyDate: requestJson.enteredDate,\r\n      },\r\n      errorMsg: \"Request failed!\",\r\n    });\r\n  };\r\n\r\n  //************ACTION HANDLERS************//\r\n\r\n  function submitHandler(event) {\r\n    event.preventDefault();\r\n\r\n    const enteredFrom = fromInputRef.current.value;\r\n    const enteredTo = toInputRef.current.value;\r\n    const enteredClass = classInputRef.current.value;\r\n    const enteredDate = dateInputRef.current.value;\r\n\r\n    const enteredFromIsValid = enteredFrom.trim() !== \"none\";\r\n    const enteredToIsValid = enteredTo.trim() !== \"\";\r\n    const enteredToIsNotMatching = enteredTo.trim() !== enteredFrom.trim();\r\n    const enteredClassIsValid = enteredClass.trim() !== \"\";\r\n    const enteredDateIsValid = enteredDate.trim() !== \"\";\r\n\r\n    setFormInputsValidity({\r\n      from: enteredFromIsValid,\r\n      to: enteredToIsValid,\r\n      toNotMatching: enteredToIsNotMatching,\r\n      class: enteredClassIsValid,\r\n      date: enteredDateIsValid,\r\n    });\r\n\r\n    const formIsValid =\r\n      enteredFromIsValid &&\r\n      enteredToIsValid &&\r\n      enteredClassIsValid &&\r\n      enteredToIsNotMatching &&\r\n      enteredDateIsValid;\r\n\r\n    if (formIsValid) {\r\n      const requestJson = {\r\n        enteredFrom,\r\n        enteredTo,\r\n        enteredClass,\r\n        enteredDate,\r\n      };\r\n\r\n      dispatch(userInputActions.UpdateUserInputs({\r\n        from : enteredFrom,\r\n        to : enteredTo,\r\n        class : enteredClass,\r\n        journeyDate : enteredDate,\r\n      }));\r\n\r\n      setFormInputsValidity({\r\n        from: true,\r\n        to: true,\r\n        toNotMatching: true,\r\n        class: true,\r\n        date: true,\r\n      });\r\n      SearchShipsHandler(requestJson);\r\n      fromInputRef.current.value = \"none\";\r\n      toInputRef.current.value = \"\";\r\n      classInputRef.current.value = \"\";\r\n      dateInputRef.current.value = \"\";\r\n    }\r\n  }\r\n\r\n  const fromControlClasses = `${styles.control} ${\r\n    formInputsValidity.from === true ? \"\" : styles.invalid\r\n  }`;\r\n  const toControlClasses = `${styles.control} ${\r\n    formInputsValidity.to === true ? \"\" : styles.invalid\r\n  }`;\r\n  const classControlClasses = `${styles.control} ${\r\n    formInputsValidity.class === true ? \"\" : styles.invalid\r\n  }`;\r\n  const dateControlClasses = `${styles.control} ${\r\n    formInputsValidity.date === true ? \"\" : styles.invalid\r\n  }`;\r\n\r\n  //************LOADING SPINNERS************//\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        <section className={classes.summary}>\r\n          <h3 className={classes.heading}>Book a Ship</h3>\r\n          <form onSubmit={submitHandler}>\r\n            {!formInputsValidity.from && (\r\n              <p className={classes.error}>Please select an Origin!</p>\r\n            )}\r\n            <div className={fromControlClasses}>\r\n              <label>From</label>\r\n              <select\r\n                ref={fromInputRef}\r\n                className={classes.select}\r\n                name=\"fromList\"\r\n                id=\"from\"\r\n              >\r\n                <option value=\"none\" style={{ color: \"grey\" }}>\r\n                  Select an Option\r\n                </option>\r\n                <option value=\"Earth\" style={{ color: \"black\" }}>\r\n                  Earth\r\n                </option>\r\n                <option value=\"Mars\" style={{ color: \"black\" }}>\r\n                  Mars\r\n                </option>\r\n                <option value=\"Moon\" style={{ color: \"black\" }}>\r\n                  Moon\r\n                </option>\r\n                <option value=\"Ceres\" style={{ color: \"black\" }}>\r\n                  Ceres\r\n                </option>\r\n                <option value=\"Europa\" style={{ color: \"black\" }}>\r\n                  Europa\r\n                </option>\r\n                <option value=\"Titan\" style={{ color: \"black\" }}>\r\n                  Titan\r\n                </option>\r\n                <option value=\"EB-15\" style={{ color: \"black\" }}>\r\n                  EB-15\r\n                </option>\r\n                <option value=\"ISS\" style={{ color: \"black\" }}>\r\n                  ISS\r\n                </option>\r\n                <option value=\"Kepler-186F\" style={{ color: \"black\" }}>\r\n                  Kepler-186F\r\n                </option>\r\n              </select>\r\n            </div>\r\n            {!formInputsValidity.to && (\r\n              <p className={classes.error}>Please select a Destination!</p>\r\n            )}\r\n            {!formInputsValidity.toNotMatching && (\r\n              <p className={classes.error}>\r\n                Destination cannot be the same as From!\r\n              </p>\r\n            )}\r\n            <div className={toControlClasses}>\r\n              <label>To</label>\r\n              <select\r\n                ref={toInputRef}\r\n                className={classes.select}\r\n                name=\"toList\"\r\n                id=\"to\"\r\n              >\r\n                <option value=\"\" style={{ color: \"grey\" }}>\r\n                  Select an Option\r\n                </option>\r\n                <option value=\"Earth\" style={{ color: \"black\" }}>\r\n                  Earth\r\n                </option>\r\n                <option value=\"Mars\" style={{ color: \"black\" }}>\r\n                  Mars\r\n                </option>\r\n                <option value=\"Moon\" style={{ color: \"black\" }}>\r\n                  Moon\r\n                </option>\r\n                <option value=\"Ceres\" style={{ color: \"black\" }}>\r\n                  Ceres\r\n                </option>\r\n                <option value=\"Europa\" style={{ color: \"black\" }}>\r\n                  Europa\r\n                </option>\r\n                <option value=\"Titan\" style={{ color: \"black\" }}>\r\n                  Titan\r\n                </option>\r\n                <option value=\"EB-15\" style={{ color: \"black\" }}>\r\n                  EB-15\r\n                </option>\r\n                <option value=\"ISS\" style={{ color: \"black\" }}>\r\n                  ISS\r\n                </option>\r\n                <option value=\"Kepler-186F\" style={{ color: \"black\" }}>\r\n                  Kepler-186F\r\n                </option>\r\n              </select>\r\n            </div>\r\n            {!formInputsValidity.class && (\r\n              <p className={classes.error}>Please select a Class!</p>\r\n            )}\r\n            <div className={classControlClasses}>\r\n              <label>Class</label>\r\n              <select\r\n                ref={classInputRef}\r\n                className={classes.select}\r\n                name=\"classList\"\r\n                id=\"class\"\r\n              >\r\n                <option value=\"\" style={{ color: \"grey\" }}>\r\n                  Select an Option\r\n                </option>\r\n                <option value=\"Economy\" style={{ color: \"black\" }}>\r\n                  Economy\r\n                </option>\r\n                <option value=\"Premium\" style={{ color: \"black\" }}>\r\n                  Premium\r\n                </option>\r\n                <option value=\"Executive\" style={{ color: \"black\" }}>\r\n                  Executive\r\n                </option>\r\n              </select>\r\n            </div>\r\n            {!formInputsValidity.date && (\r\n              <p className={classes.error}>Please select the Journey Date!</p>\r\n            )}\r\n            <div className={dateControlClasses}>\r\n              <label htmlFor=\"date\">Journey Date</label>\r\n              <input\r\n                ref={dateInputRef}\r\n                id=\"date\"\r\n                label=\"Journey Date\"\r\n                type=\"date\"\r\n                min={moment().format(\"YYYY-MM-DD\")}\r\n              ></input>\r\n            </div>\r\n            <div className={classes.action}>\r\n              <Button type=\"submit\" className={classes.actions} >\r\n                Search Ships\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </section>\r\n      </Layout>\r\n      <section className={classes.ships}>\r\n        <div>\r\n          <ShipList ships={response} />\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}