{"ast":null,"code":"var _jsxFileName = \"D:\\\\React_Projects\\\\space-ticket-booking-React-main\\\\src\\\\components\\\\Ticket Booking\\\\MyBookings.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport classes from \"./MyBooking.module.css\";\nimport Layout from \"../layout/Layout\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport useHttp from \"../../hooks/use-http\";\nimport TicketList from \"./TicketList\";\nimport Modal from \"../UI/Modal\";\nimport Button from \"../UI/Button/Button\";\nimport ticketClasses from \"../UI/Button/Button.module.css\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ticketId = null;\n\nfunction MyBookings() {\n  _s();\n\n  //************DECLARATIONS************//\n  const userEmail = useSelector(state => state.login.userId);\n  const {\n    isLoading: bookingIsLoading,\n    sendRequest: sendBookingRequest,\n    response: bookingResponse\n  } = useHttp();\n  const {\n    isLoading: cancelIsLoading,\n    error: cancelError,\n    sendRequest: sendCancelRequest,\n    response: cancelResponse,\n    resetError: resetCancelError,\n    resetResponse: resetCancelResponse\n  } = useHttp();\n  const [showCancellationPrompt, setShowCancellationPrompt] = useState(false); //************API CALLS************//\n  //Request to backend for bookings data\n\n  const fetchBookingDetails = async requestJson => {\n    sendBookingRequest({\n      url: \"https://space-ticket-booking-java.herokuapp.com/api/protected/fetchBookingDetails\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: {\n        userEmail: requestJson.userEmail\n      },\n      errorMsg: \"Request failed!\"\n    });\n  }; //Request to backend for cancelling ticket\n\n\n  const cancelTicket = async requestJson => {\n    sendCancelRequest({\n      url: \"https://space-ticket-booking-java.herokuapp.com/api/protected/cancelTicket\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: {\n        bookingId: requestJson.ticketId\n      },\n      errorMsg: \"Request failed!\"\n    });\n  }; //************ACTION HANDLERS************//\n\n\n  useEffect(() => {\n    const requestJson = {\n      userEmail\n    };\n    fetchBookingDetails(requestJson);\n  }, []);\n\n  function onTicketCancelHandler(id) {\n    ticketId = id;\n    setShowCancellationPrompt(true);\n  }\n\n  function cancellationHandler() {\n    const requestJson = {\n      ticketId\n    };\n    cancelTicket(requestJson);\n    setShowCancellationPrompt(false);\n  }\n\n  function closeTicketCancelModal() {\n    setShowCancellationPrompt(false);\n    ticketId = null;\n  }\n\n  function recallFetchBooking() {\n    const requestJson = {\n      userEmail\n    };\n    fetchBookingDetails(requestJson);\n    resetCancelResponse();\n    resetCancelError();\n  } //************MODALS************//\n\n\n  const ticketCancelModalActions = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.actions,\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      className: ticketClasses.button,\n      onClick: cancellationHandler,\n      children: \"Yes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: ticketClasses.button,\n      onClick: closeTicketCancelModal,\n      children: \"No\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n\n  const ticketCancelModalContent = /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.total,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"ARE YOU SURE? REFUNDS CAN TAKE UP TO 5-7 DAYS.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n\n  const cancellationMessageActions = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.actions,\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      className: ticketClasses.button,\n      onClick: recallFetchBooking,\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n\n  const cancellationMessageContent = /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.total,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: cancelResponse.responseMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this); //************LOADING SPINNERS************//\n\n\n  if (bookingIsLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"centered\",\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (cancelIsLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"centered\",\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [showCancellationPrompt && /*#__PURE__*/_jsxDEV(Modal, {\n      children: [ticketCancelModalContent, ticketCancelModalActions]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this), cancelResponse.responseCode === 0 && /*#__PURE__*/_jsxDEV(Modal, {\n      children: [cancellationMessageContent, cancellationMessageActions]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TicketList, {\n      bookingList: bookingResponse,\n      cancellationHandler: onTicketCancelHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyBookings, \"rI/j8hR9JBnfVb+MtGp5VPoftRY=\", false, function () {\n  return [useSelector, useHttp, useHttp];\n});\n\n_c = MyBookings;\nexport default MyBookings;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyBookings\");","map":{"version":3,"sources":["D:/React_Projects/space-ticket-booking-React-main/src/components/Ticket Booking/MyBookings.js"],"names":["React","classes","Layout","useSelector","useEffect","useState","useHttp","TicketList","Modal","Button","ticketClasses","LoadingSpinner","ticketId","MyBookings","userEmail","state","login","userId","isLoading","bookingIsLoading","sendRequest","sendBookingRequest","response","bookingResponse","cancelIsLoading","error","cancelError","sendCancelRequest","cancelResponse","resetError","resetCancelError","resetResponse","resetCancelResponse","showCancellationPrompt","setShowCancellationPrompt","fetchBookingDetails","requestJson","url","method","headers","body","errorMsg","cancelTicket","bookingId","onTicketCancelHandler","id","cancellationHandler","closeTicketCancelModal","recallFetchBooking","ticketCancelModalActions","actions","button","ticketCancelModalContent","total","cancellationMessageActions","cancellationMessageContent","responseMessage","responseCode"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classes from \"./MyBooking.module.css\";\nimport Layout from \"../layout/Layout\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport useHttp from \"../../hooks/use-http\";\nimport TicketList from \"./TicketList\";\nimport Modal from \"../UI/Modal\";\nimport Button from \"../UI/Button/Button\";\nimport ticketClasses from \"../UI/Button/Button.module.css\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\n\nvar ticketId = null;\nfunction MyBookings() {\n\n  //************DECLARATIONS************//\n\n  const userEmail = useSelector((state) => state.login.userId);\n\n  const {\n    isLoading: bookingIsLoading,\n    sendRequest: sendBookingRequest,\n    response: bookingResponse,\n  } = useHttp();\n\n  const {\n    isLoading: cancelIsLoading,\n    error: cancelError,\n    sendRequest: sendCancelRequest,\n    response: cancelResponse,\n    resetError: resetCancelError,\n    resetResponse: resetCancelResponse,\n  } = useHttp();\n\n  const [showCancellationPrompt, setShowCancellationPrompt] = useState(false);\n\n  //************API CALLS************//\n\n  //Request to backend for bookings data\n  const fetchBookingDetails = async (requestJson) => {\n    sendBookingRequest({\n      url: \"https://space-ticket-booking-java.herokuapp.com/api/protected/fetchBookingDetails\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: {\n        userEmail: requestJson.userEmail,\n      },\n      errorMsg: \"Request failed!\",\n    });\n  };\n\n  //Request to backend for cancelling ticket\n  const cancelTicket = async (requestJson) => {\n    sendCancelRequest({\n      url: \"https://space-ticket-booking-java.herokuapp.com/api/protected/cancelTicket\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: {\n        bookingId: requestJson.ticketId,\n      },\n      errorMsg: \"Request failed!\",\n    });\n  };\n\n  //************ACTION HANDLERS************//\n\n  useEffect(() => {\n    const requestJson = { userEmail };\n    fetchBookingDetails(requestJson);\n  }, []);\n\n  function onTicketCancelHandler(id) {\n    ticketId = id;\n    setShowCancellationPrompt(true);\n  }\n\n  function cancellationHandler() {\n    const requestJson = {\n      ticketId,\n    };\n    cancelTicket(requestJson);\n    setShowCancellationPrompt(false);\n  }\n\n  function closeTicketCancelModal() {\n    setShowCancellationPrompt(false);\n    ticketId = null;\n  }\n\n  function recallFetchBooking() {\n    const requestJson = {\n      userEmail,\n    };\n    fetchBookingDetails(requestJson);\n    resetCancelResponse();\n    resetCancelError();\n  }\n\n  //************MODALS************//\n\n  const ticketCancelModalActions = (\n    <div className={classes.actions}>\n      <Button className={ticketClasses.button} onClick={cancellationHandler}>\n        Yes\n      </Button>\n      <Button className={ticketClasses.button} onClick={closeTicketCancelModal}>\n        No\n      </Button>\n    </div>\n  );\n\n  const ticketCancelModalContent = (\n    <React.Fragment>\n      <div className={classes.total}>\n        <span>ARE YOU SURE? REFUNDS CAN TAKE UP TO 5-7 DAYS.</span>\n      </div>\n    </React.Fragment>\n  );\n\n  const cancellationMessageActions = (\n    <div className={classes.actions}>\n      <Button className={ticketClasses.button} onClick={recallFetchBooking}>\n        Close\n      </Button>\n    </div>\n  );\n\n  const cancellationMessageContent = (\n    <React.Fragment>\n      <div className={classes.total}>\n        <span>{cancelResponse.responseMessage}</span>\n      </div>\n    </React.Fragment>\n  );\n\n  //************LOADING SPINNERS************//\n\n  if (bookingIsLoading) {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (cancelIsLoading) {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  return (\n    <Layout>\n      {showCancellationPrompt && (\n        <Modal>\n          {ticketCancelModalContent}\n          {ticketCancelModalActions}\n        </Modal>\n      )}\n      {cancelResponse.responseCode === 0 && (\n        <Modal>\n          {cancellationMessageContent}\n          {cancellationMessageActions}\n        </Modal>\n      )}\n      <TicketList\n        bookingList={bookingResponse}\n        cancellationHandler={onTicketCancelHandler}\n      />\n    </Layout>\n  );\n}\nexport default MyBookings;\n"]},"metadata":{},"sourceType":"module"}